"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[254],{9894:function(e,t,r){r.d(t,{z:function(){return u}});var n="Button_button__wiIYs",a=r(184),u=function(e){var t=e.onLoadMoreButton,r=e.children;return(0,a.jsx)("button",{type:"submit",onClick:t,className:n,children:r})}},190:function(e,t,r){r.d(t,{a:function(){return l}});var n=r(8683),a=r(7689),u=r(1087),o=r(2752),c="MovieGalleryItem_movieGalleryItem__DcGLI",i="MovieGalleryItem_movieGalleryItem__image__xyUPd",s=r(184),f=function(e){var t=e.poster_path,r=e.original_title,n=e.id,f="".concat("https://image.tmdb.org/t/p/").concat("w500").concat(t);null!==t&&void 0!==t||(f=o);var p=(0,a.TH)(),l="/"===p.pathname?"/movies":p.pathname;return(0,s.jsx)("li",{className:c,children:(0,s.jsx)(u.rU,{to:"".concat(l,"/").concat(n),state:{from:p},children:(0,s.jsx)("img",{src:f,alt:r,className:i})})})},p="MovieGallery_movieGallery__M2pL-",l=function(e){var t=e.movies;return(0,s.jsx)("ul",{className:p,children:t.length>0&&t.map((function(e){return(0,s.jsx)(f,(0,n.Z)({},e),e.id)}))})}},5254:function(e,t,r){r.r(t),r.d(t,{default:function(){return Z}});var n=r(3433),a=r(5861),u=r(9439),o=r(7757),c=r.n(o),i=r(2791),s=r(1087),f=r(1686),p=r.n(f),l=r(2134),m="SearchForm_searchForm__NsJpF",h="SearchForm_searchFormButton__Zv-9i",d="SearchForm_searchFormLabel__ks0d9",v="SearchForm_searchFormInput__3mF-P",b=r(184),_=function(e){var t=e.onSubmit,r=(0,i.useState)(""),n=(0,u.Z)(r,2),a=n[0],o=n[1];return(0,b.jsxs)("form",{className:m,onSubmit:function(e){if(e.preventDefault(),""===a.trim())return p().Notify.warning("Enter a query");t(a),o("")},children:[(0,b.jsxs)("button",{type:"submit",className:h,children:[(0,b.jsx)("span",{className:d,children:"Search"}),(0,b.jsx)(l.RB5,{})]}),(0,b.jsx)("input",{onChange:function(e){o(e.currentTarget.value.toLowerCase())},className:v,type:"text",value:a,autoComplete:"off",autoFocus:!0,placeholder:"Search movies"})]})},y=r(8565),x=r(5323),g=r(190),k=r(9894),w="Movies_container__hb-lD",Z=function(){var e,t=(0,s.lr)(),r=(0,u.Z)(t,2),o=r[0],f=r[1],l=(0,i.useState)([]),m=(0,u.Z)(l,2),h=m[0],d=m[1],v=(0,i.useState)(1),Z=(0,u.Z)(v,2),j=Z[0],S=Z[1],N=(0,i.useState)(!1),F=(0,u.Z)(N,2),M=F[0],L=F[1],C=(0,i.useState)(!1),G=(0,u.Z)(C,2),I=G[0],q=G[1],B=(0,i.useState)(!1),D=(0,u.Z)(B,2)[1],P=null!==(e=o.get("query"))&&void 0!==e?e:"";(0,i.useEffect)((function(){if(P){var e=function(){var e=(0,a.Z)(c().mark((function e(){var t,r,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),e.prev=1,e.next=4,(0,y.V0)(P,j);case 4:if(t=e.sent,r=t.results,0!==(a=t.total_results)){e.next=10;break}return L(!1),e.abrupt("return",p().Notify.failure("Sorry, there are no movies matching your search query. Please try again."));case 10:if(!(j>Math.ceil(a/20))){e.next=14;break}return L(!1),e.abrupt("return",p().Notify.warning("We're sorry, but you've reached the end of search results."));case 14:d((function(e){return[].concat((0,n.Z)(e),(0,n.Z)(r))})),L(j<Math.ceil(a/20)),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),D(e.t0.message);case 22:return e.prev=22,q(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[1,19,22,25]])})));return function(){return e.apply(this,arguments)}}();e()}}),[P,j]);return(0,b.jsxs)("div",{className:w,children:[(0,b.jsx)(_,{onSubmit:function(e){f(""!==e?{query:e}:{}),d([]),S(1),D(!1)}}),I&&(0,b.jsx)(x.a,{}),h.length>0&&(0,b.jsx)(g.a,{movies:h}),M&&(0,b.jsx)(k.z,{disabled:I,onLoadMoreButton:function(){S((function(e){return e+1}))},children:I?"Loading...":"Load more"})]})}},8565:function(e,t,r){r.d(t,{CE:function(){return f},Df:function(){return c},TP:function(){return i},V0:function(){return p},vJ:function(){return s}});var n=r(5861),a=r(7757),u=r.n(a),o=r(1243),c=function(){var e=(0,n.Z)(u().mark((function e(){var t,r,n,a=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:1,e.next=3,o.Z.get("https://api.themoviedb.org/3/trending/movie/day?api_key=1a0f2de132857590e908bb553dea49ea&page=".concat(t));case 3:return r=e.sent,n=r.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=(0,n.Z)(u().mark((function e(t){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.get("https://api.themoviedb.org/3/movie/".concat(t,"?api_key=1a0f2de132857590e908bb553dea49ea"));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=(0,n.Z)(u().mark((function e(t){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.get("https://api.themoviedb.org/3/movie/".concat(t,"/credits?api_key=1a0f2de132857590e908bb553dea49ea"));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,n.Z)(u().mark((function e(t){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.get("https://api.themoviedb.org/3/movie/".concat(t,"/reviews?api_key=1a0f2de132857590e908bb553dea49ea"));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,n.Z)(u().mark((function e(t){var r,n,a,c=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:1,e.next=3,o.Z.get("https://api.themoviedb.org/3/search/movie?api_key=1a0f2de132857590e908bb553dea49ea&query=".concat(t,"&page=").concat(r));case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},2752:function(e,t,r){e.exports=r.p+"static/media/poster-not-found-main.0449f0b293474977b6bd.jpg"}}]);
//# sourceMappingURL=254.d9de7246.chunk.js.map